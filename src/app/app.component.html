<div class="app-container" [class.app-is-mobile]="mobileQuery.matches">
  <mat-toolbar color="primary" class="app-toolbar">
    <button *ngIf="signedIn" mat-icon-button (click)="snav.toggle()">
      <mat-icon>menu</mat-icon>
    </button>

    <button mat-button class="app-name" routerLink="/login">IDCrypt</button>

    <span class="filler"></span>

    <span *ngIf="!signedIn" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="active">
        <button mat-button class="nav-link" routerLink="/login">Sign In</button>
    </span>

    <a *ngIf="signedIn" mat-list-item [matMenuTriggerFor]="loggedInMenu">
      <mat-icon>more_horiz</mat-icon>
    </a>
    <mat-menu #loggedInMenu="matMenu">
      <a mat-menu-item *ngIf="user" routerLink="/settings">{{user.email}}</a>
      <a mat-menu-item (click)="onLogout()">Logout</a>
    </mat-menu>

  </mat-toolbar>

  <mat-sidenav-container class="app-sidenav-container" [style.marginTop.px]="mobileQuery.matches ? 56 : 0">
    <mat-sidenav #snav
                 [fixedInViewport]="mobileQuery.matches"
                 fixedTopGap="56"
                 [mode]="mobileQuery.matches ? 'over' : 'side'">

      <mat-nav-list *ngIf="signedIn">
        <a mat-list-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Home</a>

        <a mat-list-item [matMenuTriggerFor]="requestsMenu">Requests</a>
        <mat-menu #requestsMenu="matMenu">
          <a mat-menu-item routerLink="/requests" routerLinkActive="active" (click)="onSideNavClick()">Pending</a>
          <a mat-menu-item routerLink="/archived-requests" routerLinkActive="active" (click)="onSideNavClick()">Archived</a>
        </mat-menu>

        <a mat-list-item [matMenuTriggerFor]="repoMenu">Repositories</a>
        <mat-menu #repoMenu="matMenu">
          <a mat-menu-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Repo 1</a>
          <a mat-menu-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Repo 2</a>
          <a mat-menu-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Repo 3</a>
        </mat-menu>

        <a mat-list-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Documents</a>

        <a mat-list-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Members</a>

        <a mat-list-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Administrators</a>

        <a mat-list-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Reports</a>

        <a mat-list-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Billing</a>

        <a mat-list-item routerLink="/settings" routerLinkActive="active" (click)="onSideNavClick()">Settings</a>

        <a mat-list-item routerLink="/home" routerLinkActive="active" (click)="onSideNavClick()">Support</a>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content>
      <router-outlet>
        <span *ngIf="showLoader" class="loading-indicator">
          <mat-spinner [diameter]="40"></mat-spinner>
        </span>
      </router-outlet>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
